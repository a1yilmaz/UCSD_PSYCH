<html>

<head>
  <script src="https://www.gstatic.com/firebasejs/5.3.1/firebase.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css" type="text/css" />
</head>

<body onload="redirect()">
  <div class="container">
    <div class="progress">
      <div class="progress-bar progress-bar-striped active" id="myBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:0%">
        Time Remaining
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col">
        <!-- Hey Webmaster! Place this html code where you'd like the game to appear. -->
        <iframe src="https://www.silvergames.com/en/2048/iframe" width="100%" height="1000" style="margin:0;padding:0;border:0"></iframe>
        <!-- End of game embed code -->
      </div>
    </div>
  </div>
  <script type="text/javascript">
    var config = {
      apiKey: "AIzaSyCa5_e0vkkiBXQxKcpvGKHyumnWyvQ_os8",
      authDomain: "ucsd-psych.firebaseapp.com",
      databaseURL: "https://ucsd-psych.firebaseio.com",
      projectId: "ucsd-psych",
      storageBucket: "ucsd-psych.appspot.com",
      messagingSenderId: "325328536445"
    };

    firebase.initializeApp(config);

    window.onload = function() {
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          window.userId = user.uid;
        } else {
          window.location = "/";
        }
      });
    }
    let timeout = 30000
    let date1;

    function redirect() {
      setTimeout(f, timeout);
      date1 = new Date();
      var elem = document.getElementById("myBar");
      var id = setInterval(frame, 10);

      function frame() {
        let date2 = new Date();
        let diff = date2 - date1; //milliseconds interval
        elem.style.width = ((diff / (timeout)) * 100) + '%';
      }
    }

    function f() {
      window.location.href = '/lineupinstructions'

    }
  </script>
</body>

</html>
